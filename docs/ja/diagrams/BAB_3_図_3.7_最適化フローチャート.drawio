<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.3.1">
  <diagram name="図 3.7 - 最適化フローチャート" id="flowchart-optimisasi">
    <mxGraphModel dx="419" dy="281" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1500" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="start" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#333333;strokeColor=#333333;fontColor=#ffffff;fontSize=12;fontStyle=1;" value="開始" vertex="1">
          <mxGeometry height="50" width="100" x="80" y="20" as="geometry" />
        </mxCell>
        <mxCell id="input" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="入力: スタッフ, 日付,&#xa;制約, 事前入力" vertex="1">
          <mxGeometry height="50" width="160" x="50" y="100" as="geometry" />
        </mxCell>
        <mxCell id="init" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="CP-SATモデル&#xa;初期化" vertex="1">
          <mxGeometry height="50" width="160" x="260" y="100" as="geometry" />
        </mxCell>
        <mxCell id="var" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="決定変数作成&#xa;shifts[s,d,t] ∈ {0,1}" vertex="1">
          <mxGeometry height="50" width="160" x="490" y="100" as="geometry" />
        </mxCell>
        <mxCell id="const-box" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8e8e8;strokeColor=#333333;strokeWidth=2;verticalAlign=top;fontStyle=1;fontSize=12;" value="制約追加" vertex="1">
          <mxGeometry height="150" width="420" x="690" y="160" as="geometry" />
        </mxCell>
        <mxCell id="hard-box" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d9d9d9;strokeColor=#333333;verticalAlign=top;fontStyle=1;fontSize=10;" value="ハード制約" vertex="1">
          <mxGeometry height="100" width="180" x="710" y="190" as="geometry" />
        </mxCell>
        <mxCell id="hc1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="1日1シフト" vertex="1">
          <mxGeometry height="25" width="150" x="725" y="215" as="geometry" />
        </mxCell>
        <mxCell id="hc2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="事前入力" vertex="1">
          <mxGeometry height="25" width="150" x="725" y="245" as="geometry" />
        </mxCell>
        <mxCell id="hc3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="カレンダールール" vertex="1">
          <mxGeometry height="25" width="150" x="725" y="275" as="geometry" />
        </mxCell>
        <mxCell id="soft-box" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#cccccc;strokeColor=#333333;verticalAlign=top;fontStyle=1;fontSize=10;" value="ソフト制約" vertex="1">
          <mxGeometry height="100" width="180" x="910" y="190" as="geometry" />
        </mxCell>
        <mxCell id="sc1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="スタッフグループ" vertex="1">
          <mxGeometry height="25" width="70" x="920" y="215" as="geometry" />
        </mxCell>
        <mxCell id="sc2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="日次制限" vertex="1">
          <mxGeometry height="25" width="80" x="1000" y="215" as="geometry" />
        </mxCell>
        <mxCell id="sc3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="月間制限" vertex="1">
          <mxGeometry height="25" width="80" x="920" y="245" as="geometry" />
        </mxCell>
        <mxCell id="sc4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="5日休息" vertex="1">
          <mxGeometry height="25" width="70" x="1010" y="245" as="geometry" />
        </mxCell>
        <mxCell id="sc5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;fontSize=9;" value="隣接" vertex="1">
          <mxGeometry height="25" width="80" x="950" y="275" as="geometry" />
        </mxCell>
        <mxCell id="violation" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="違反変数作成&#xa;ペナルティ追跡" vertex="1">
          <mxGeometry height="50" width="160" x="470" y="210" as="geometry" />
        </mxCell>
        <mxCell id="obj" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="目的関数構築&#xa;最小化 Σ(重み × 違反)" vertex="1">
          <mxGeometry height="50" width="200" x="250" y="210" as="geometry" />
        </mxCell>
        <mxCell id="config" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="ソルバー設定&#xa;timeout=30s, workers=4" vertex="1">
          <mxGeometry height="50" width="160" x="50" y="210" as="geometry" />
        </mxCell>
        <mxCell id="mJkR8BjswpJrj77znrBD-1" edge="1" parent="1" source="exec" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="check" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="550" y="420" />
              <mxPoint x="550" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="exec" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="CP-SATソルバー&#xa;実行" vertex="1">
          <mxGeometry height="50" width="160" x="50" y="360" as="geometry" />
        </mxCell>
        <mxCell id="check" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=12;fontStyle=1;" value="状態?" vertex="1">
          <mxGeometry height="80" width="110" x="495" y="465" as="geometry" />
        </mxCell>
        <mxCell id="optimal" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d9d9d9;strokeColor=#333333;fontSize=11;fontStyle=1;" value="最適解" vertex="1">
          <mxGeometry height="40" width="100" x="340" y="570" as="geometry" />
        </mxCell>
        <mxCell id="feasible" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0e0e0;strokeColor=#333333;fontSize=11;fontStyle=1;" value="実行可能" vertex="1">
          <mxGeometry height="40" width="100" x="500" y="575" as="geometry" />
        </mxCell>
        <mxCell id="infeasible" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#333333;fontSize=11;fontStyle=1;fontColor=#ffffff;" value="実行不可能" vertex="1">
          <mxGeometry height="40" width="100" x="660" y="575" as="geometry" />
        </mxCell>
        <mxCell id="extract" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;" value="ソリューション抽出&#xa;シフト記号にマップ" vertex="1">
          <mxGeometry height="50" width="160" x="370" y="655" as="geometry" />
        </mxCell>
        <mxCell id="error" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#666666;strokeColor=#333333;fontSize=11;fontColor=#ffffff;" value="エラー&#xa;返却" vertex="1">
          <mxGeometry height="50" width="100" x="660" y="655" as="geometry" />
        </mxCell>
        <mxCell id="result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=11;align=left;spacingLeft=10;" value="結果返却:&lt;br&gt;• スケジュール行列&lt;br&gt;• 違反リスト" vertex="1">
          <mxGeometry height="60" width="160" x="370" y="740" as="geometry" />
        </mxCell>
        <mxCell id="end" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#333333;strokeColor=#333333;fontColor=#ffffff;fontSize=12;fontStyle=1;" value="終了" vertex="1">
          <mxGeometry height="50" width="100" x="500" y="865" as="geometry" />
        </mxCell>
        <mxCell id="a1" edge="1" parent="1" source="start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="input">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a2" edge="1" parent="1" source="input" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="init">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a3" edge="1" parent="1" source="init" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="var">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a4" edge="1" parent="1" source="var" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="const-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a5" edge="1" parent="1" source="const-box" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="violation">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a6" edge="1" parent="1" source="violation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="obj">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a7" edge="1" parent="1" source="obj" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="config">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a8" edge="1" parent="1" source="config" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="exec">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="130" y="365" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="a10" edge="1" parent="1" source="check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;fontSize=9;" value="最適解">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="575" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a11" edge="1" parent="1" source="check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;fontSize=9;" target="feasible" value="実行可能">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a12" edge="1" parent="1" source="check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;fontSize=9;" target="infeasible" value="実行不可能">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a13" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="extract">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="615" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a14" edge="1" parent="1" source="feasible" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="extract">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a15" edge="1" parent="1" source="infeasible" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="error">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a16" edge="1" parent="1" source="extract" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="result">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a17" edge="1" parent="1" source="result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a18" edge="1" parent="1" source="error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;" target="end">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="710" y="890" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
